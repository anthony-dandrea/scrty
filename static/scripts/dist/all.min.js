$(function(){ function loginSuccess(){ window.location='/';} 
function loginFail(){alert('Error: Login failed.')} 
function checkAuth(){$.getJSON('/isauthorized',function(data){if(data.response==true){loginSuccess();}else{loginFail();}}).fail(function(){alert('Error: Auth error.')});} 
function poll(){$.getJSON('/poll',function(data){if(data.response==true){checkAuth();}else{
 setTimeout(function(){poll();},5000);}}).fail(function(){alert('Error: Login error.')});} 
$('#login').on('submit',function(e){e.preventDefault();var $self=$(this),formData=$self.serialize();console.log(formData);$.post('/login',formData,function(data){if(data.response==true){poll();}else{alert('Error: User not found');}}).fail(function(){alert('Error: Make sure your username is enabled and correct.');});});});$(function(){ function logout(){$.getJSON('/logout',function(data){if(data.response==true){
 location.reload();}else{alert('Error: Logout failure.')}}).fail(function(){alert('Error: Server error while logging out.')});} 
$('#logout').on('click',function(e){e.preventDefault();logout();});});$(function(){$('#password_encrypt').on('submit',function(e){e.preventDefault();var $self=$(this),formData=$self.serialize();$.post('/encrypt-password',formData,function(data){if(data.success){var app=$self.find('[name="app"]').val(),password=data.encrypted_password;setCookie(app,password);alert('Cookie set:\n'+app+'\n'+password);}else{alert('Something broke.');}}).fail(function(){alert('Something broke.');});});});function copyToClipboard(text){window.prompt("Copy to clipboard: Ctrl+C, Enter",text);}
function setCookie(key,value){document.cookie=key+'='+value+';';}
function cookieValue(key){var regexKey="^(?:.*;)?"+key+"=([^;]+)(?:.*)?$"
regexKey=new RegExp(regexKey);return(document.cookie.match(regexKey)||[,null])[1];}
$(function(){ function logout(){$.getJSON('/logout',function(data){if(data.response==true){
 location.reload();}else{alert('Error: Logout failure.')}}).fail(function(){alert('Error: Server error while logging out.')});} 
$('#logout').on('click',function(e){e.preventDefault();logout();});});$(function(){$('#password_encrypt').on('submit',function(e){e.preventDefault();var $self=$(this),formData=$self.serialize();$.post('/encrypt-password',formData,function(data){if(data.success){var app=$self.find('[name="app"]').val(),password=data.encrypted_password;setCookie(app,password);alert('Cookie set:\n'+app+'\n'+password);}else{alert('Something broke.');}}).fail(function(){alert('Something broke.');});});});$(function(){
 function checkAuth(){$.getJSON('/isauthorized',function(data){console.log(data);}).fail(function(error){ if(error.status==403){window.location='/login';}else{console.log(error);}}); setTimeout(function(){checkAuth();},3000);}
checkAuth();});function copyToClipboard(text){window.prompt("Copy to clipboard: Ctrl+C, Enter",text);}
function setCookie(key,value){document.cookie=key+'='+value+';';}
function cookieValue(key){var regexKey="^(?:.*;)?"+key+"=([^;]+)(?:.*)?$"
regexKey=new RegExp(regexKey);return(document.cookie.match(regexKey)||[,null])[1];}